#!/usr/bin/env python

import config
import mifare
from users.users import Users
import uuid
import door
import sys

users = Users()

if hasattr(config, "keyA"): mifare.keyA = config.keyA
if hasattr(config, "keyB"): mifare.keyB = config.keyB


while True:
    user = users.get_card_user(mifare.wait_read()[0:16])
    print(user, file=sys.stderr)
    if not user == None:
        door.open()

